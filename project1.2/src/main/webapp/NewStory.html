<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>New Approval Process</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
 <script>
	 function pitchStory() {
		 	class Story{
		 		constructor(title,tag_line,
		 				story_type,status,pitchDate,genre,completion_date){
		 			if(story_type==="novel"){
		 				this.weight=50;
		 			}else if(story_type==="short story"){
		 				this.weight=25;
		 			}else if(story_type==="article"){
		 				this.weight=10;
		 			}else{
		 				this.weight=0;
		 			}
		 
		 			this.title=title;
		 			this.tag_line=tag_line;
		 			this.story_type=story_type;
		 			this.story_id=0;
		 			this.status="to be assigned";
		 			this.pitchDate="01/01/21";
		 			this.genre=genre;
		 			this.currentApprovalPhase="AE";
		 			this.completion_date=completion_date;
		 			this.current_ed=1;
		 			this.description="blahblah";
		 		}
		 	}
		 
		    let url = 'http://localhost:8080/project1.2/storyreg';

		    // collect user input
		    let story=new Story(document.getElementById('title').value,    		
		    		          document.getElementById('tagline').value,
		    		          document.getElementById('storyType').value,
		                      document.getElementById('genre').value,
		                      document.getElementById('completionDate').value)

		    // AJAX Call
		    let xhttp = new XMLHttpRequest();
		    xhttp.onreadystatechange = sendStory;
		    xhttp.open("POST", url, true);
		    xhttp.setRequestHeader('Content-Type', 'application/json');
		    xhttp.setRequestHeader('Access-Control-Allow-Origin', '*');
		    xhttp.send(JSON.stringify(story));

		    function sendStory() {
		        if (xhttp.readyState == 4) {
		            if (xhttp.status == 200) {
		                console.log('success');
		            }
		        }
		    }

	 }
	 
	 </script>
</head>
<body> 

	<p>New Authors, please use this form to pitch a new story.</p>

	 <p> Enter the following details</p>
 <br>
    <div id='custInfo' class='container'>
        <form>
            <div class="form-control">
            
             <label for='title'>Title:</label>
            <input id='title' type='text' placeholder="your book title here">
            
            <br>
            <label for='genre'>Genre:</label>
            <input id='genre' type='text' placeholder="fantasy">
            
            <br>
            <label for='tagline'>Tag Line:</label>
            <input id='tagline' type='text' placeholder="blah blah">
            <br>
            <label for='completionDate'>Completion Date:</label>
            <input id='completionDate' type='text' placeholder="the expected completion date">
            <br>
            
            <label for='storyType'>Story Type:</label>
            <input id='storyType' type='text' placeholder="novel or something">
            <br>
            
       
            <button id='newStory' type='button' onclick='pitchStory()'>Pitch a New Story</button>
            </div>
        </form>
    </div>
</body>
<!-- Bootstrap Script -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>

</html>