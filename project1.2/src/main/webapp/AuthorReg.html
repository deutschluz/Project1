<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Author Registration</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
 <script>
	 function registerAuthor() {
		    let url = 'http://localhost:8080/project1.2/authreg';

		    // collect user input
		    let cusername=document.getElementById('username').value;
		    let cfirstN = document.getElementById('firstN').value;
		    let clastN = document.getElementById('lastN').value;
		    let cage= document.getElementById('age').value;
		    let cemail = document.getElementById('email').value;
			let cpasswd= document.getElementById('passwd').value;

		    // create author object
		    let author = {
		    	username: cusername,
		        firstN: cfirstN,
		        lastN: clastN,
		        age: cage,
		        email: cemail,
		        passwd: cpasswd,
		    }

		    // AJAX Call
		    let xhttp = new XMLHttpRequest();
		    xhttp.onreadystatechange = sendAuthor;
		    xhttp.open("POST", url, true);
		    xhttp.setRequestHeader('Content-Type', 'application/json');
		    xhttp.setRequestHeader('Access-Control-Allow-Origin', '*');
		    xhttp.send(JSON.stringify(author));

		    function sendAuthor() {
		        if (xhttp.readyState == 4) {
		            if (xhttp.status == 200) {
		                console.log('success');
		            }
		        }
		    }

	 }
	 
	 </script>
</head>
<body>
<h2>
	<p>New Authors, please use this form to create a new account.</p>
	</h2>
	 <p> Enter the following details</p>
 <br>
    <div id='custInfo' class='container'>
        <form>
            <div class="form-control">
            
             <label for='username'>Usert Name:</label>
            <input id='username' type='text' placeholder="your user name">
            
            <br>
            <label for='firstN'>First Name:</label>
            <input id='firstN' type='text' placeholder="your first name">
            
            <br>
            <label for='lastN'>Last Name:</label>
            <input id='lastN' type='text' placeholder="your last name">
            <br>
            <label for='email'>Email:</label>
            <input id='email' type='text' placeholder="your email">
            <br>
            
            <label for='passwd'>Password:</label>
            <input id='passwd' type='text' placeholder="its a secret! shhh!">
            <br>
            
             <label for='age'>Age:</label>
            <input id='age' type='number' placeholder='0'>
            <br>
            <button id='addCustomer' type='button' onclick='registerAuthor()'>Register Author</button>
            </div>
        </form>
    </div>
</body>
<!-- Bootstrap Script -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>

</html>